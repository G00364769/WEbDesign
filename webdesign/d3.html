<!Doctype html>
<html lang="en">
<head>
		<title>D3 </title>
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<style>
			rect:hover {fill: black;}
		</style>
		<meta chaeset="UTF-8">
		<title>Document</title>
			<script src ="https://d3js.org/d3.v5.min.js"></script>
</head>
	 <body>
		<div id ="myDiv"></div>
	</body>
		<i class="fa fa-home" style="font-size:48px;color:green"></i>
		<button onclick ="barchart()" button type="Button" <i class="fa fa-home"></i> <b>Main Page</button>  

<script>
d3.csv("Records.csv").then(function(data){
   console.log(data);
   
   let svgContainer=d3.select("#myDiv").append("svg")
   .attr("width",3000)
   .attr("higth",3000);
   
   let myRecrangle = svgContainer.selectAll("rect")
   .data(data);
   
	myRecrangle.enter()
		.append("rect")
		// start transition
		.attr("fill","green")
		// staring from same location
		.attr("x",function(d,i){
		 return 50+(i*41);
		 })
		 // grow from 0
		.attr("y",180)
		.attr("width",40)
		.transition()
		.duration(1500)
		// finish transition 
		.attr("x",function(d,i){
		 return 50+(i*41);
		 })
		 .attr("y",function (d,i){
			return 180-d.Age*3;
			})
		 .attr("width",40)
		 .attr("height",function(d){
		  return d.Age*10;
		  })
		 .attr("fill",function(d){
		 
			if (d.Age<=20){return "blue";}
			else if (d.Age<=35){return "green";}
			else if (d.Age<=45){return "Orange";}
			else {return "red";}
		 
		 });
		 
	// Add lable 
	let mylabel = svgContainer.selectAll("text")
   .data(data);
   
	mylabel.enter()
		.append("text")
		// start lable tran
		.attr("x",function(d,i){
		 return 70+(i*41);
		 })
		.attr("y",300)
		//transition time
		.transition()
		.duration (1500)
		.delay(1000)
		.ease(d3.easeBounceOut)
		// ending transition
		.attr("x",function(d,i){
		 return 70+(i*41);
		 })
		 .attr("y",function (d,i){
			return 200-d.Age*3;
			})
			.attr("text-anchor","middle")
			.attr("font-family","sans-serif")
			.attr("font-size","15px")
			.attr("fill","white")
			.text(function(d){
				return d.Age + "\u00B0";
				})
		//transition time
		.transition()
		.duration (1500)
		.delay(1000)
		.ease(d3.easeBounceOut)
		// ending transition
		.attr("x",function(d,i){
		 return 70+(i*41);
		 })
		 .attr("y",function (d,i){
			return 200-d.Age*3;
			})
			.attr("text-anchor","middle")
			.attr("font-family","sans-serif")
			.attr("font-size","12px")
			.attr("fill","white")
			.text(function(d){
				return d.Location ;
				});
		 
   })
   function barchart(){
	window.location.href = "addbutton.html";
	}
   
</script>
</html>